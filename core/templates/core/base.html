{% load i18n %}
<!DOCTYPE html>
<html lang="{{ lang|default:'fa' }}" {% if lang == 'fa' %}dir="rtl"{% else %}dir="ltr"{% endif %}>
<head>
  {# ===== Ù¾Ø§ÛŒÙ‡â€ŒÙ‡Ø§ÛŒ Ø¶Ø±ÙˆØ±ÛŒ ===== #}
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>
    {% if lang == 'fa' %}
      Ø¢Ø±ÙˆÛŒÙˆÙ† â€” ØªÙˆØ³Ø¹Ù‡â€ŒØ¯Ù‡Ù†Ø¯Ù‡Ù” ÙÙˆÙ„â€ŒØ§Ø³ØªÚ© Ù¾Ø§ÛŒØªÙˆÙ†/Ø¬Ù†Ú¯Ùˆ
    {% else %}
      Arvion â€” Fullâ€‘stack Python/Django Developer
    {% endif %}
  </title>

  {# ===== Meta Description (Ø¯ÙˆØ­Ø§Ù„ØªÙ‡ Ø¨Ø±Ø§ÛŒ SEO) ===== #}
  <meta name="description" content="{% if lang == 'fa' %}Ù†Ù…ÙˆÙ†Ù‡â€ŒÚ©Ø§Ø±Ù‡Ø§ØŒ Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ØŒ Ù…Ù‚Ø§Ù„Ø§Øª Ùˆ Ø®Ø¯Ù…Ø§Øª ØªÙˆØ³Ø¹Ù‡Ù” ÙˆØ¨ Ø¨Ø§ Ù¾Ø§ÛŒØªÙˆÙ†/Ø¬Ù†Ú¯Ùˆ.{% else %}Portfolio, projects, articles, and web development services with Python/Django.{% endif %}">

  {# ===== Canonical + hreflang Ø¨Ø±Ø§ÛŒ Ø³Ø¦Ùˆ ===== #}
  {% with current_path=request.path %}
    <link rel="canonical" href="{{ request.scheme }}://{{ request.get_host }}{{ current_path }}?lang={{ lang }}">
    <link rel="alternate" hreflang="fa" href="{{ request.scheme }}://{{ request.get_host }}{{ current_path }}?lang=fa">
    <link rel="alternate" hreflang="en" href="{{ request.scheme }}://{{ request.get_host }}{{ current_path }}?lang=en">
    <link rel="alternate" hreflang="x-default" href="{{ request.scheme }}://{{ request.get_host }}{{ current_path }}?lang=en">
  {% endwith %}

  {# ===== OpenGraph / Twitter ===== #}
  <meta property="og:type" content="website">
  <meta property="og:title" content="{% if lang == 'fa' %}Ø¢Ø±ÙˆÛŒÙˆÙ† â€” ØªÙˆØ³Ø¹Ù‡â€ŒØ¯Ù‡Ù†Ø¯Ù‡Ù” ÙÙˆÙ„â€ŒØ§Ø³ØªÚ©{% else %}Arvion â€” Fullâ€‘stack Developer{% endif %}">
  <meta property="og:description" content="{% if lang == 'fa' %}Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ØŒ Ù…Ù‚Ø§Ù„Ø§Øª Ùˆ Ø®Ø¯Ù…Ø§Øª Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒÙ†ÙˆÛŒØ³ÛŒ Ù¾Ø§ÛŒØªÙˆÙ†/Ø¬Ù†Ú¯Ùˆ.{% else %}Projects, articles, and Python/Django services.{% endif %}">
  <meta property="og:url" content="{{ request.build_absolute_uri }}">
  {# <meta property="og:image" content="https://example.com/static/og-cover.jpg"> #}
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="{% if lang == 'fa' %}Ø¢Ø±ÙˆÛŒÙˆÙ† â€” ØªÙˆØ³Ø¹Ù‡â€ŒØ¯Ù‡Ù†Ø¯Ù‡Ù” ÙÙˆÙ„â€ŒØ§Ø³ØªÚ©{% else %}Arvion â€” Fullâ€‘stack Developer{% endif %}">
  <meta name="twitter:description" content="{% if lang == 'fa' %}Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ØŒ Ù…Ù‚Ø§Ù„Ø§Øª Ùˆ Ø®Ø¯Ù…Ø§Øª Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒÙ†ÙˆÛŒØ³ÛŒ Ù¾Ø§ÛŒØªÙˆÙ†/Ø¬Ù†Ú¯Ùˆ.{% else %}Projects, articles, and Python/Django services.{% endif %}">
  {# <meta name="twitter:image" content="https://example.com/static/og-cover.jpg"> #}

  {# ===== Structured Data (Ø³Ø§Ø¯Ù‡) ===== #}
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"Person",
    "name": "{% if lang == 'fa' %}Ø¢Ø±ÙˆÛŒÙ†{% else %}Arvin{% endif %}",
    "jobTitle": "Fullâ€‘stack Developer",
    "url": "{{ request.scheme }}://{{ request.get_host }}/",
    "knowsAbout": ["Python", "Django", "HTMX", "SPA", "Web Performance"]
  }
  </script>

  {# ===== Ú©ØªØ§Ø¨Ø®Ø§Ù†Ù‡â€ŒÙ‡Ø§ ===== #}
  <!-- HTMX Ø¨Ø±Ø§ÛŒ Ø±ÙØªØ§Ø±Ù‡Ø§ÛŒ SPA Ù…Ø±Ø­Ù„Ù‡â€ŒÙ‡Ø§ÛŒ Ø¨Ø¹Ø¯ -->
  <script src="https://unpkg.com/htmx.org@1.9.12"></script>
  <!-- TailwindCSS (MVP Ùˆ Ø±ÛŒØ³Ù¾Ø§Ù†Ø³ÛŒÙˆ) -->
  <script src="https://cdn.tailwindcss.com"></script>

  {% block extra_head %}{% endblock %}
</head>
<body class="min-h-screen bg-gray-50 text-gray-900 flex flex-col {% if lang == 'fa' %}rtl{% endif %}">

  {# ===== Header (Ø¯Ø³Ú©ØªØ§Ù¾ + Ù…ÙˆØ¨Ø§ÛŒÙ„) ===== #}
  <header class="border-b bg-white">
    <div class="max-w-6xl mx-auto px-4">
      <div class="flex items-center justify-between py-3">
        <!-- Ø¨Ø±Ù†Ø¯ -->
        <a href="/?lang={{ lang }}" class="font-bold text-xl">
          {% if lang == 'fa' %}Ø¢Ø±ÙˆÛŒÙˆÙ†{% else %}Arvion{% endif %}
        </a>

        <!-- Ù…Ù†ÙˆÛŒ Ø¯Ø³Ú©ØªØ§Ù¾ -->
        <nav class="hidden md:flex items-center gap-5 text-sm">
          <a href="/?lang={{ lang }}" class="hover:underline">
            {% if lang == 'fa' %}Ø®Ø§Ù†Ù‡{% else %}Home{% endif %}
          </a>
          <a href="/about/?lang={{ lang }}" class="hover:underline">
            {% if lang == 'fa' %}Ø¯Ø±Ø¨Ø§Ø±Ù‡{% else %}About{% endif %}
          </a>
          <a href="/blog/?lang={{ lang }}" class="hover:underline">
            {% if lang == 'fa' %}ÙˆØ¨Ù„Ø§Ú¯{% else %}Blog{% endif %}
          </a>
          <a href="/projects/?lang={{ lang }}" class="hover:underline">
            {% if lang == 'fa' %}Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§{% else %}Projects{% endif %}
          </a>
          <a href="/services/?lang={{ lang }}" class="hover:underline">
            {% if lang == 'fa' %}Ø®Ø¯Ù…Ø§Øª{% else %}Services{% endif %}
          </a>
          <a href="/contact/?lang={{ lang }}" class="hover:underline">
            {% if lang == 'fa' %}ØªÙ…Ø§Ø³{% else %}Contact{% endif %}
          </a>

          <!-- Ø³ÙˆÛŒÛŒÚ†Ø± Ø²Ø¨Ø§Ù† (Ø­ÙØ¸ Ù…Ø³ÛŒØ± Ø¬Ø§Ø±ÛŒ Ø¨Ø§ ?lang=) -->
          <form method="get" action="{{ request.path }}" style="display:inline;">
            {% for key, value in request.GET.items %}
              {% if key != 'lang' %}
                <input type="hidden" name="{{ key }}" value="{{ value }}">
              {% endif %}
            {% endfor %}
            <select
              class="border rounded px-2 py-1"
              name="lang"
              onchange="this.form.submit()">
              <option value="fa" {% if lang == 'fa' %}selected{% endif %}>ÙØ§Ø±Ø³ÛŒ</option>
              <option value="en" {% if lang == 'en' %}selected{% endif %}>English</option>
            </select>
          </form>
        </nav>

        <!-- Ø¯Ú©Ù…Ù‡ Ù…Ù†ÙˆÛŒ Ù…ÙˆØ¨Ø§ÛŒÙ„ (Ø¯Ø± ØµÙˆØ±Øª Ù†ÛŒØ§Ø² Ø¨Ù‡ Ú©Ø´ÙˆÛŒÛŒ) -->
        <button
          class="md:hidden border rounded px-3 py-2"
          aria-label="Menu"
          onclick="document.getElementById('mobile-menu').classList.toggle('hidden')">
          â˜°
        </button>
      </div>

      <!-- Ù…Ù†ÙˆÛŒ Ù…ÙˆØ¨Ø§ÛŒÙ„ ØªØ§Ø´Ùˆ (Ø§Ø®ØªÛŒØ§Ø±ÛŒ) -->
      <nav id="mobile-menu" class="md:hidden hidden pb-3 text-sm">
        <div class="flex flex-col gap-2">
          <a href="/?lang={{ lang }}" class="hover:underline">
            {% if lang == 'fa' %}Ø®Ø§Ù†Ù‡{% else %}Home{% endif %}
          </a>
          <a href="/about/?lang={{ lang }}" class="hover:underline">
            {% if lang == 'fa' %}Ø¯Ø±Ø¨Ø§Ø±Ù‡{% else %}About{% endif %}
          </a>
          <a href="/blog/?lang={{ lang }}" class="hover:underline">
            {% if lang == 'fa' %}ÙˆØ¨Ù„Ø§Ú¯{% else %}Blog{% endif %}
          </a>
          <a href="/projects/?lang={{ lang }}" class="hover:underline">
            {% if lang == 'fa' %}Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§{% else %}Projects{% endif %}
          </a>
          <a href="/services/?lang={{ lang }}" class="hover:underline">
            {% if lang == 'fa' %}Ø®Ø¯Ù…Ø§Øª{% else %}Services{% endif %}
          </a>
          <a href="/contact/?lang={{ lang }}" class="hover:underline">
            {% if lang == 'fa' %}ØªÙ…Ø§Ø³{% else %}Contact{% endif %}
          </a>

          <!-- Ø³ÙˆÛŒÛŒÚ†Ø± Ø²Ø¨Ø§Ù† Ù…ÙˆØ¨Ø§ÛŒÙ„ -->
          <label class="pt-2 text-gray-500">
            {% if lang == 'fa' %}Ø²Ø¨Ø§Ù†:{% else %}Language:{% endif %}
          </label>
          <form method="get" action="{{ request.path }}">
            {% for key, value in request.GET.items %}
              {% if key != 'lang' %}
                <input type="hidden" name="{{ key }}" value="{{ value }}">
              {% endif %}
            {% endfor %}
            <select
              class="border rounded px-2 py-1"
              name="lang"
              onchange="this.form.submit()">
              <option value="fa" {% if lang == 'fa' %}selected{% endif %}>ÙØ§Ø±Ø³ÛŒ</option>
              <option value="en" {% if lang == 'en' %}selected{% endif %}>English</option>
            </select>
          </form>
        </div>
      </nav>
    </div>
  </header>

  {# ===== Ù…Ø­ØªÙˆØ§ÛŒ Ø§ØµÙ„ÛŒ ===== #}
  {# Ù†Ú©ØªÙ‡: padding-bottom Ø¨Ø±Ø§ÛŒ Ø®Ø§Ù„ÛŒ Ú¯Ø°Ø§Ø´ØªÙ† ÙØ¶Ø§ÛŒ Ù†ÙˆØ§Ø± Ù¾Ø§ÛŒÛŒÙ†ÛŒ Ù…ÙˆØ¨Ø§ÛŒÙ„ #}
  <main class="flex-1 pb-[80px] md:pb-0">
    {% block content %}{% endblock %}
  </main>

  {# ===== ÙÙˆØªØ± ===== #}
  <footer id="site-footer" class="border-t bg-white mb-[65px]">
    <div class="max-w-6xl mx-auto px-4 py-6 text-sm text-gray-500">
      Â© <span id="y"></span>
      {% if lang == 'fa' %}Ú©Ù„ÛŒÙ‡Ù” Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸ Ø§Ø³Øª.{% else %}All rights reserved.{% endif %}
    </div>
  </footer>

  {# ===== Ù†ÙˆØ§Ø± Ù¾Ø§ÛŒÛŒÙ†ÛŒ Ù…ÙˆØ¨Ø§ÛŒÙ„ (Bottom Bar) â€” Ø«Ø§Ø¨Øª Ùˆ Ù‡ÙˆØ´Ù…Ù†Ø¯ ===== #}
  {# Ø±ÙØªØ§Ø±: Ø±ÙˆÛŒ Ù…ÙˆØ¨Ø§ÛŒÙ„ Ø«Ø§Ø¨Øª Ù…ÛŒâ€ŒÙ…Ø§Ù†Ø¯Ø› ÙˆÙ‚ØªÛŒ ÙÙˆØªØ± Ø¯Ø± Ø¯ÛŒØ¯ Ø§Ø³ØªØŒ Ù†ÙˆØ§Ø± Ù¾Ø§ÛŒÛŒÙ† Ø¨Ø§ Ø§Ù†ÛŒÙ…ÛŒØ´Ù† Ø®Ø§Ø±Ø¬ Ù…ÛŒâ€ŒØ´ÙˆØ¯ ØªØ§ ÙÙˆØªØ± Ù¾ÙˆØ´Ø§Ù†Ø¯Ù‡ Ù†Ø´ÙˆØ¯. #}
  <nav
    id="mobile-bottom-bar"
    class="md:hidden fixed bottom-0 left-0 right-0 z-40 bg-white/95 backdrop-blur border-t
           transition-transform duration-300 ease-in-out will-change-transform h-[65px]">
    <div class="max-w-6xl mx-auto px-4 py-2">
      <ul class="flex items-center justify-between text-sm">
        <li><a href="/?lang={{ lang }}" class="flex flex-col items-center">
          <span class="text-xl">ğŸ </span>
          <span>{% if lang == 'fa' %}Ø®Ø§Ù†Ù‡{% else %}Home{% endif %}</span>
        </a></li>
        <li><a href="/blog/?lang={{ lang }}" class="flex flex-col items-center">
          <span class="text-xl">ğŸ“°</span>
          <span>{% if lang == 'fa' %}ÙˆØ¨Ù„Ø§Ú¯{% else %}Blog{% endif %}</span>
        </a></li>
        <li><a href="/projects/?lang={{ lang }}" class="flex flex-col items-center">
          <span class="text-xl">ğŸ—‚ï¸</span>
          <span>{% if lang == 'fa' %}Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§{% else %}Projects{% endif %}</span>
        </a></li>
        <li><a href="/contact/?lang={{ lang }}" class="flex flex-col items-center">
          <span class="text-xl">âœ‰ï¸</span>
          <span>{% if lang == 'fa' %}ØªÙ…Ø§Ø³{% else %}Contact{% endif %}</span>
        </a></li>
        <li>
          <form method="get" action="{{ request.path }}">
            {% for key, value in request.GET.items %}
              {% if key != 'lang' %}
                <input type="hidden" name="{{ key }}" value="{{ value }}">
              {% endif %}
            {% endfor %}
            <select
              aria-label="Language"
              class="border rounded px-2 py-1"
              name="lang"
              onchange="this.form.submit()">
              <option value="fa" {% if lang == 'fa' %}selected{% endif %}>FA</option>
              <option value="en" {% if lang == 'en' %}selected{% endif %}>EN</option>
            </select>
          </form>
        </li>
      </ul>
    </div>
  </nav>

  {% block extra_scripts %}{% endblock %}
  <script>document.getElementById('y').textContent = new Date().getFullYear()</script>
</body>
</html>